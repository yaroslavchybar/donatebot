{
  "version": 3,
  "sources": ["../../../../src/cli/codegen_templates/component_server.ts"],
  "sourcesContent": ["import { header } from \"./common.js\";\n\nexport function componentServerTS(isRoot: boolean): string {\n  const result = `\n  ${header(\n    \"Generated utilities for implementing server-side Convex query and mutation functions.\",\n  )}\n  import type {\n    ActionBuilder,\n    ${isRoot ? \"AnyComponents,\" : \"\"}\n    HttpActionBuilder,\n    MutationBuilder,\n    QueryBuilder,\n    GenericActionCtx,\n    GenericMutationCtx,\n    GenericQueryCtx,\n    GenericDatabaseReader,\n    GenericDatabaseWriter,\n  } from \"convex/server\";\n  import {\n    actionGeneric,\n    httpActionGeneric,\n    queryGeneric,\n    mutationGeneric,\n    internalActionGeneric,\n    internalMutationGeneric,\n    internalQueryGeneric,\n    ${isRoot ? \"componentsGeneric,\" : \"\"}\n  } from \"convex/server\";\n  import type { DataModel } from \"./dataModel.js\";\n\n  /**\n   * Define a query in this Convex app's public API.\n   *\n   * This function will be allowed to read your Convex database and will be accessible from the client.\n   *\n   * @param func - The query function. It receives a {@link QueryCtx} as its first argument.\n   * @returns The wrapped query. Include this as an \\`export\\` to name it and make it accessible.\n   */\n  export const query: QueryBuilder<DataModel, \"public\"> = queryGeneric;\n\n  /**\n   * Define a query that is only accessible from other Convex functions (but not from the client).\n   *\n   * This function will be allowed to read from your Convex database. It will not be accessible from the client.\n   *\n   * @param func - The query function. It receives a {@link QueryCtx} as its first argument.\n   * @returns The wrapped query. Include this as an \\`export\\` to name it and make it accessible.\n   */\n  export const internalQuery: QueryBuilder<DataModel, \"internal\"> = internalQueryGeneric;\n\n  /**\n   * Define a mutation in this Convex app's public API.\n   *\n   * This function will be allowed to modify your Convex database and will be accessible from the client.\n   *\n   * @param func - The mutation function. It receives a {@link MutationCtx} as its first argument.\n   * @returns The wrapped mutation. Include this as an \\`export\\` to name it and make it accessible.\n   */\n  export const mutation: MutationBuilder<DataModel, \"public\"> = mutationGeneric;\n\n  /**\n   * Define a mutation that is only accessible from other Convex functions (but not from the client).\n   *\n   * This function will be allowed to modify your Convex database. It will not be accessible from the client.\n   *\n   * @param func - The mutation function. It receives a {@link MutationCtx} as its first argument.\n   * @returns The wrapped mutation. Include this as an \\`export\\` to name it and make it accessible.\n   */\n  export const internalMutation: MutationBuilder<DataModel, \"internal\"> = internalMutationGeneric;\n\n  /**\n   * Define an action in this Convex app's public API.\n   *\n   * An action is a function which can execute any JavaScript code, including non-deterministic\n   * code and code with side-effects, like calling third-party services.\n   * They can be run in Convex's JavaScript environment or in Node.js using the \"use node\" directive.\n   * They can interact with the database indirectly by calling queries and mutations using the {@link ActionCtx}.\n   *\n   * @param func - The action. It receives an {@link ActionCtx} as its first argument.\n   * @returns The wrapped action. Include this as an \\`export\\` to name it and make it accessible.\n   */\n  export const action: ActionBuilder<DataModel, \"public\"> = actionGeneric;\n\n  /**\n   * Define an action that is only accessible from other Convex functions (but not from the client).\n   *\n   * @param func - The function. It receives an {@link ActionCtx} as its first argument.\n   * @returns The wrapped function. Include this as an \\`export\\` to name it and make it accessible.\n   */\n  export const internalAction: ActionBuilder<DataModel, \"internal\"> = internalActionGeneric;\n\n  /**\n   * Define an HTTP action.\n   *\n   * The wrapped function will be used to respond to HTTP requests received\n   * by a Convex deployment if the requests matches the path and method where\n   * this action is routed. Be sure to route your httpAction in \\`convex/http.js\\`.\n   *\n   * @param func - The function. It receives an {@link ActionCtx} as its first argument\n   * and a Fetch API \\`Request\\` object as its second.\n   * @returns The wrapped function. Import this function from \\`convex/http.js\\` and route it to hook it up.\n   */\n  export const httpAction: HttpActionBuilder = httpActionGeneric;\n\n  type GenericCtx = GenericActionCtx<DataModel> | GenericMutationCtx<DataModel> | GenericQueryCtx<DataModel>;\n\n  /**\n   * A set of services for use within Convex query functions.\n   *\n   * The query context is passed as the first argument to any Convex query\n   * function run on the server.\n   *\n   * If you're using code generation, use the \\`QueryCtx\\` type in \\`convex/_generated/server.d.ts\\` instead.\n   */\n  export type QueryCtx = GenericQueryCtx<DataModel>;\n\n  /**\n   * A set of services for use within Convex mutation functions.\n   *\n   * The mutation context is passed as the first argument to any Convex mutation\n   * function run on the server.\n   *\n   * If you're using code generation, use the \\`MutationCtx\\` type in \\`convex/_generated/server.d.ts\\` instead.\n   */\n  export type MutationCtx = GenericMutationCtx<DataModel>;\n\n  /**\n   * A set of services for use within Convex action functions.\n   *\n   * The action context is passed as the first argument to any Convex action\n   * function run on the server.\n   */\n  export type ActionCtx = GenericActionCtx<DataModel>;\n\n  /**\n   * An interface to read from the database within Convex query functions.\n   *\n   * The two entry points are {@link DatabaseReader.get}, which fetches a single\n   * document by its {@link Id}, or {@link DatabaseReader.query}, which starts\n   * building a query.\n   */\n  export type DatabaseReader = GenericDatabaseReader<DataModel>;\n\n  /**\n   * An interface to read from and write to the database within Convex mutation\n   * functions.\n   *\n   * Convex guarantees that all writes within a single mutation are\n   * executed atomically, so you never have to worry about partial writes leaving\n   * your data in an inconsistent state. See [the Convex Guide](https://docs.convex.dev/understanding/convex-fundamentals/functions#atomicity-and-optimistic-concurrency-control)\n   * for the guarantees Convex provides your functions.\n   */\n  export type DatabaseWriter = GenericDatabaseWriter<DataModel>;\n  ${\n    isRoot\n      ? `\n  /**\n   * Load the API for calling functions from this Convex deployment's components.\n   */\n  export const components: AnyComponents = componentsGeneric();`\n      : \"\"\n  }\n  `;\n  return result;\n}\n"],
  "mappings": ";AAAA,SAAS,cAAc;AAEhB,gBAAS,kBAAkB,QAAyB;AACzD,QAAM,SAAS;AAAA,IACb;AAAA,IACA;AAAA,EACF,CAAC;AAAA;AAAA;AAAA,MAGG,SAAS,mBAAmB,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAkB9B,SAAS,uBAAuB,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAgIpC,SACI;AAAA;AAAA;AAAA;AAAA,mEAKA,EACN;AAAA;AAEA,SAAO;AACT;",
  "names": []
}
