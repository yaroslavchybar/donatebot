{
  "version": 3,
  "sources": ["../../../../src/browser/sync/pagination.ts"],
  "sourcesContent": ["import type { PaginationResult } from \"../../server/index.js\";\nimport type { Infer, Value } from \"../../values/index.js\";\nimport type { paginationOptsValidator } from \"../../server/index.js\";\n\nexport type PaginationStatus =\n  | \"LoadingFirstPage\"\n  | \"CanLoadMore\"\n  | \"LoadingMore\"\n  | \"Exhausted\";\n\nexport type PaginatedQueryResult<T> = {\n  results: T[];\n  status: PaginationStatus;\n  loadMore: LoadMoreOfPaginatedQuery;\n};\n\n/**\n * Returns whether loading more was actually initiated; in cases where\n * a paginated query is already loading more items or there are no more\n * items available, calling loadMore() may do nothing.\n */\nexport type LoadMoreOfPaginatedQuery = (numItems: number) => boolean;\n\n// The arguments for each page query.\nexport function asPaginationArgs(value: Value): Record<string, Value> & {\n  paginationOpts: Infer<typeof paginationOptsValidator>;\n} {\n  if (typeof (value as any).paginationOpts.numItems !== \"number\") {\n    throw new Error(`Not valid paginated query args: ${JSON.stringify(value)}`);\n  }\n  return value as unknown as Record<string, Value> & {\n    paginationOpts: Infer<typeof paginationOptsValidator>;\n  };\n}\n\n/**\n * Validates that a Value is a valid pagination result and returns it cast to PaginationResult.\n */\nexport function asPaginationResult(value: Value): PaginationResult<Value> {\n  if (\n    typeof value !== \"object\" ||\n    value === null ||\n    !Array.isArray((value as any).page) ||\n    typeof (value as any).isDone !== \"boolean\" ||\n    typeof (value as any).continueCursor !== \"string\"\n  ) {\n    throw new Error(`Not a valid paginated query result: ${value?.toString()}`);\n  }\n  return value as unknown as PaginationResult<Value>;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwBO,SAAS,iBAAiB,OAE/B;AACA,MAAI,OAAQ,MAAc,eAAe,aAAa,UAAU;AAC9D,UAAM,IAAI,MAAM,mCAAmC,KAAK,UAAU,KAAK,CAAC,EAAE;AAAA,EAC5E;AACA,SAAO;AAGT;AAKO,SAAS,mBAAmB,OAAuC;AACxE,MACE,OAAO,UAAU,YACjB,UAAU,QACV,CAAC,MAAM,QAAS,MAAc,IAAI,KAClC,OAAQ,MAAc,WAAW,aACjC,OAAQ,MAAc,mBAAmB,UACzC;AACA,UAAM,IAAI,MAAM,uCAAuC,OAAO,SAAS,CAAC,EAAE;AAAA,EAC5E;AACA,SAAO;AACT;",
  "names": []
}
